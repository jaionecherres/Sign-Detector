{% extends 'components/base.html' %}
{% load static %}
{% block content %}
<title>{% block title %} {{ title1 }} {% endblock title %}</title>
<section class="dark:bg-principal mt-20" style="margin-top: 60px;"> <!-- Aumenté el margin-top a 60px para bajar el título -->
    
    <div class="text-center" data-aos="fade" data-aos-delay="200">
        <div class="flex flex-col items-center justify-center">
            <span style="color: black !important; font-size: 1.25rem; font-family: 'Jomolhari', serif;">{{ title1 }}</span>
        </div>
    </div>
    <form method="post" enctype="multipart/form-data" class="space-y-6 py-4">
        {% csrf_token %}
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mx-4 lg:mx-20" data-aos="fade">
            <!-- Columna de la izquierda (imagen) -->
            <div class="bg-[#FAF3DD] dark:bg-principal rounded-3xl flex flex-col justify-center items-center p-8" data-aos="fade-right" data-aos-delay="200">
                <div class="w-[60%] text-center">
                    <h2 class="dark:text-blue-300 text-2xl text-center mt-6 font-black" style="color: black; font-family: 'Jomolhari', serif;">Imagen Actual</h2><br>
                    <div id="imagenPreview">
                        {% if user.get_image %}
                            <img id="imagenSeleccionada" src="{{ user.get_image }}" class="mx-auto d-block rounded-lg" alt="Foto de perfil" style="width: 200px; height: 200px; object-fit: cover;">
                        {% else %}
                            <img id="imagenSeleccionada" src="{% static 'img/perfil_random.jpeg' %}" class="mx-auto d-block rounded-lg" alt="Foto de perfil por defecto" style="width: 200px; height: 200px; object-fit: cover;">
                        {% endif %}
                    </div>
                </div>
                <div class="mt-6 text-center">
                    <label for="{{ form.image.id_for_label }}" class="font-black uppercase text-lg block mb-2" style="color: black; font-family: 'Jomolhari', serif;">
                        Actualizar Imagen
                    </label>
                    <div class="relative inline-block">
                        <input id="{{ form.image.id_for_label }}" name="{{ form.image.name }}" type="file" class="text-gray-500 file:bg-[#A0A38A] file:hover:bg-[#8C8D77] file:text-white file:px-4 file:py-2 file:rounded-md file:border-0 file:cursor-pointer" />
                    </div>
                </div>
                
            </div>

            <!-- Columna de la derecha (información del usuario) -->
            
            <!-- Columna de la derecha (información del usuario) -->
            <div class="p-4 rounded-3xl bg-[#FAF3DD] dark:bg-principal flex flex-col justify-center items-center" data-aos="fade-right" data-aos-delay="200">
                <div class="grid md:grid-cols-2 gap-4 w-full px-4">
                    <div class="flex flex-col space-y-4">
                        <div class="mb-4">
                            <label for="{{ form.username.id_for_label }}" class="dark:text-blue-300 font-black uppercase text-lg block" style="color: black; font-family: 'Jomolhari', serif;">Usuario</label>
                            <input type="text" name="{{ form.username.name }}" id="{{ form.username.id_for_label }}" 
                                   value="{{ form.username.value }}" 
                                   style="background-color: #D9D9D9; color: black;"
                                   class=" text-black focus:text-black dark:bg-gray-800 
                                          focus:outline-none focus:border-mint-500 focus:ring-2 focus:ring-mint-200 
                                          border border-gray-300 rounded-md py-2 px-3 placeholder-gray-400">
                        </div>
                        <div class="mb-4">
                            <label for="{{ form.first_name.id_for_label }}" class="dark:text-blue-300 font-black uppercase text-lg block" style="color: black; font-family: 'Jomolhari', serif;">Nombres</label>
                            <input type="text" name="{{ form.first_name.name }}" id="{{ form.first_name.id_for_label }}" 
                                   value="{{ form.first_name.value }}" 
                                   style="background-color: #D9D9D9; color: black;"
                                   class=" text-black focus:text-black dark:bg-gray-800 
                                          focus:outline-none focus:border-mint-500 focus:ring-2 focus:ring-mint-200 
                                          border border-gray-300 rounded-md py-2 px-3 placeholder-gray-400">
                        </div>
                        <div class="mb-4">
                            <label for="{{ form.last_name.id_for_label }}" class="dark:text-blue-300 font-black uppercase text-lg block" style="color: black; font-family: 'Jomolhari', serif;">Apellidos</label>
                            <input type="text" name="{{ form.last_name.name }}" id="{{ form.last_name.id_for_label }}" 
                                   value="{{ form.last_name.value }}" 
                                   style="background-color: #D9D9D9; color: black;"
                                   class=" text-black focus:text-black dark:bg-gray-800 
                                          focus:outline-none focus:border-mint-500 focus:ring-2 focus:ring-mint-200 
                                          border border-gray-300 rounded-md py-2 px-3 placeholder-gray-400">
                        </div>
                    </div>
                    
                    <div class="flex flex-col space-y-4">
                        <div class="mb-4">
                            <label for="{{ form.email.id_for_label }}" class="dark:text-blue-300 font-black uppercase text-lg block" style="color: black; font-family: 'Jomolhari', serif;">Correo Electrónico</label>
                            <input type="email" name="{{ form.email.name }}" id="{{ form.email.id_for_label }}" 
                                   value="{{ form.email.value }}" 
                                   style="background-color: #D9D9D9; color: black; width: 230px; margin-top: 2px;"
                                   class="text-black focus:text-black dark:bg-gray-800 
                                          focus:outline-none focus:border-mint-500 focus:ring-2 focus:ring-mint-200 
                                          border border-gray-300 rounded-md py-2 px-3 placeholder-gray-400">
                        </div>
                        
                        <div class="mb-4" style="position: relative; top: -20px;"> <!-- Ajuste directo con top -->
                            <label for="{{ form.phone.id_for_label }}" class="dark:text-blue-300 font-black uppercase text-lg block" style="color: black; font-family: 'Jomolhari', serif;">Teléfono</label>
                            <input type="text" name="{{ form.phone.name }}" id="{{ form.phone.id_for_label }}" 
                                   value="{{ form.phone.value }}" 
                                   style="background-color: #D9D9D9; color: black;"
                                   class="text-black focus:text-black dark:bg-gray-800 
                                          focus:outline-none focus:border-mint-500 focus:ring-2 focus:ring-mint-200 
                                          border border-gray-300 rounded-md py-2 px-3 placeholder-gray-400">
                        </div>
                    </div>
                </div>
                

                <div class="flex flex-col md:flex-row justify-center mt-6 w-full px-4 space-x-6">
                    <button style="background-color: #A0A38A; font-family: 'Jomolhari', serif;" class="hover:bg-[#8C8D77] text-white py-2 px-4 rounded-full mr-2 flex items-center justify-center">
                        <i class="fa-solid fa-file-pen mr-2"></i> Guardar
                    </button>
                    <a style="background-color: #E37E18; font-family: 'Jomolhari', serif;" class="hover:bg-[#8C8D77] text-white py-2 px-4 rounded-full mr-2 flex items-center justify-center" href="{% url 'security:auth_profile' %}">
                        <i class="fa-solid fa-key mr-2"></i> Cancelar
                    </a>
                </div>
            </div>
            

        </div>
    </form>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const imagenInput = document.getElementById('{{ form.image.id_for_label }}');
        const imagenSeleccionada = document.getElementById('imagenSeleccionada');

        imagenInput.addEventListener('change', function() {
            const file = imagenInput.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    imagenSeleccionada.src = e.target.result;
                }
                reader.readAsDataURL(file);
            } else {
                const defaultImage = "{% static 'img/perfil_random.jpg' %}";
                imagenSeleccionada.src = defaultImage;
            }
        });
    });
</script>
{% endblock content %}
